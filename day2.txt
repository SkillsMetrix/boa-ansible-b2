# importing package
from fastapi import FastAPI,HTTPException,status
from fastapi.params import Body
from pydantic import BaseModel
from random import randrange
# creating object
app= FastAPI()
#dummy record
my_post=[{"id":101,"title":"Demo App","content":"demo content"}]

#global logic for search
def findPost(id):
    for p in my_post:
        if p['id']== id:
            return p


#decalare model

class Post(BaseModel):
    title:str
    content:str
#get request

@app.get("/showusers")
def showUsers():
    return {"message":my_post}
#post request

@app.post("/adduser",status_code=status.HTTP_201_CREATED)
def addUser(payload: Post):
    udata=payload.dict()
    udata['id']=randrange(0,1000)
    my_post.append(udata)
    return{ "userdata":payload}

#get with specific id
@app.get("/findpost/{id}")
def findById(id:int):
    print(id)
    post=findPost(id)
    if not post:
        raise HTTPException(status_code=status.HTTP_404_NOT_FOUND,detail="Given ID not found")
    else:

        return {"Post found ":post}


